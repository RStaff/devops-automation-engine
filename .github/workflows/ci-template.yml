# .github/workflows/ci-template.yml
on:
  workflow_call:
    inputs:
      pipeline-dir:
        description: "Path to the pipeline directory"
        required: true
        type: string
      environment:
        description: "Environment (dev/staging/prod)"
        required: true
        type: string
      tools:
        description: "JSON array of tools (e.g. [\"plan\",\"apply\",\"destroy\"])"
        required: true
        type: string

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Execute pipeline
        run: |
          echo "Running pipeline \${{ inputs.pipeline-dir }}"
          for tool in \$(echo ${{ inputs.tools }} | jq -r '.[]'); do
            echo "ðŸ”§ $tool"
          done
